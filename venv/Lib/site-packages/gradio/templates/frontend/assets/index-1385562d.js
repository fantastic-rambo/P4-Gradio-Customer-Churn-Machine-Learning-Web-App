import{S as ge,e as be,s as de,y as we,o as H,Q as Re,h as S,p as O,w as j,r as P,u as D,v as Q,k as T,a0 as Fe,a1 as Le,C as Me,a5 as Ve,F as R,G as F,H as L,a7 as Xe,R as le,E as te,I as Z,m as I,g as d,K as C,N,j as G,ap as We,O as ve,M as W,B as Ke,t as ke,x as qe,Z as Oe,ae as Pe,V as Qe,W as Ue}from"./index-b974f2e9.js";import{n as ne,B as Ze}from"./Button-50f94cb7.js";import{B as Je}from"./BlockLabel-e7e7e4d7.js";import{I as Ye}from"./IconButton-afdfe055.js";import{E as ye}from"./Empty-90e5d1be.js";import{S as pe}from"./ShareButton-4962deff.js";import{M as xe}from"./ModifyUpload-1f7b9683.js";import{D as $e}from"./Download-2c22bdee.js";import{I as je}from"./Image-fff85fed.js";import{u as el}from"./utils-c3e3db58.js";import"./Undo-5c954186.js";async function ll(l){return l?`<div style="display: flex; flex-wrap: wrap; gap: 16px">${(await Promise.all(l.map(async([e,n])=>e===null?"":await el(e.data,"url")))).map(e=>`<img src="${e}" style="height: 400px" />`).join("")}</div>`:""}const{window:ze}=Ve;function ie(l,t,e){const n=l.slice();return n[39]=t[e][0],n[40]=t[e][1],n[42]=e,n}function oe(l,t,e){const n=l.slice();return n[39]=t[e],n[43]=t,n[42]=e,n}function ae(l){let t,e;return t=new Je({props:{show_label:l[0],Icon:je,label:l[1]||"Gallery"}}),{c(){R(t.$$.fragment)},m(n,i){F(t,n,i),e=!0},p(n,i){const r={};i[0]&1&&(r.show_label=n[0]),i[0]&2&&(r.label=n[1]||"Gallery"),t.$set(r)},i(n){e||(j(t.$$.fragment,n),e=!0)},o(n){D(t.$$.fragment,n),e=!1},d(n){L(t,n)}}}function tl(l){let t,e,n,i,r,m,o=l[11]!==null&&l[6]&&se(l),s=l[8]&&_e(l),v=Z(l[10]),a=[];for(let h=0;h<v.length;h+=1)a[h]=he(ie(l,v,h));return{c(){o&&o.c(),t=H(),e=I("div"),n=I("div"),s&&s.c(),i=H();for(let h=0;h<a.length;h+=1)a[h].c();d(n,"class","grid-container svelte-vg7mqq"),C(n,"--grid-cols",l[3]),C(n,"--grid-rows",l[4]),C(n,"--object-fit",l[7]),C(n,"height",l[5]),N(n,"pt-6",l[0]),d(e,"class","grid-wrap svelte-vg7mqq"),we(()=>l[34].call(e)),N(e,"fixed-height",!l[5]||l[5]=="auto")},m(h,u){o&&o.m(h,u),S(h,t,u),S(h,e,u),G(e,n),s&&s.m(n,null),G(n,i);for(let _=0;_<a.length;_+=1)a[_]&&a[_].m(n,null);r=We(e,l[34].bind(e)),m=!0},p(h,u){if(h[11]!==null&&h[6]?o?(o.p(h,u),u[0]&2112&&j(o,1)):(o=se(h),o.c(),j(o,1),o.m(t.parentNode,t)):o&&(P(),D(o,1,1,()=>{o=null}),Q()),h[8]?s?(s.p(h,u),u[0]&256&&j(s,1)):(s=_e(h),s.c(),j(s,1),s.m(n,i)):s&&(P(),D(s,1,1,()=>{s=null}),Q()),u[0]&3072){v=Z(h[10]);let _;for(_=0;_<v.length;_+=1){const w=ie(h,v,_);a[_]?a[_].p(w,u):(a[_]=he(w),a[_].c(),a[_].m(n,null))}for(;_<a.length;_+=1)a[_].d(1);a.length=v.length}(!m||u[0]&8)&&C(n,"--grid-cols",h[3]),(!m||u[0]&16)&&C(n,"--grid-rows",h[4]),(!m||u[0]&128)&&C(n,"--object-fit",h[7]),(!m||u[0]&32)&&C(n,"height",h[5]),(!m||u[0]&1)&&N(n,"pt-6",h[0]),(!m||u[0]&32)&&N(e,"fixed-height",!h[5]||h[5]=="auto")},i(h){m||(j(o),j(s),m=!0)},o(h){D(o),D(s),m=!1},d(h){h&&(T(t),T(e)),o&&o.d(h),s&&s.d(),ve(a,h),r()}}}function nl(l){let t,e;return t=new ye({props:{unpadded_box:!0,size:"large",$$slots:{default:[il]},$$scope:{ctx:l}}}),{c(){R(t.$$.fragment)},m(n,i){F(t,n,i),e=!0},p(n,i){const r={};i[1]&8192&&(r.$$scope={dirty:i,ctx:n}),t.$set(r)},i(n){e||(j(t.$$.fragment,n),e=!0)},o(n){D(t.$$.fragment,n),e=!1},d(n){L(t,n)}}}function se(l){let t,e,n,i,r,m,o,s,v,a,h,u,_,w,A,M,k=l[9]&&re(l);i=new xe({props:{absolute:!1}}),i.$on("clear",l[26]);let z=l[10][l[11]][1]&&fe(l),E=Z(l[10]),q=[];for(let g=0;g<E.length;g+=1)q[g]=ue(oe(l,E,g));return{c(){t=I("button"),e=I("div"),k&&k.c(),n=H(),R(i.$$.fragment),r=H(),m=I("button"),o=I("img"),h=H(),z&&z.c(),u=H(),_=I("div");for(let g=0;g<q.length;g+=1)q[g].c();d(e,"class","icon-buttons svelte-vg7mqq"),d(o,"data-testid","detailed-image"),W(o.src,s=l[10][l[11]][0].data)||d(o,"src",s),d(o,"alt",v=l[10][l[11]][1]||""),d(o,"title",a=l[10][l[11]][1]||null),d(o,"loading","lazy"),d(o,"class","svelte-vg7mqq"),N(o,"with-caption",!!l[10][l[11]][1]),d(m,"class","image-button svelte-vg7mqq"),C(m,"height","calc(100% - "+(l[10][l[11]][1]?"80px":"60px")+")"),d(m,"aria-label","detailed view of selected image"),d(_,"class","thumbnails scroll-hide svelte-vg7mqq"),d(_,"data-testid","container_el"),d(t,"class","preview svelte-vg7mqq")},m(g,B){S(g,t,B),G(t,e),k&&k.m(e,null),G(e,n),F(i,e,null),G(t,r),G(t,m),G(m,o),G(t,h),z&&z.m(t,null),G(t,u),G(t,_);for(let b=0;b<q.length;b+=1)q[b]&&q[b].m(_,null);l[30](_),w=!0,A||(M=[O(m,"click",l[27]),O(t,"keydown",l[18])],A=!0)},p(g,B){if(g[9]?k?(k.p(g,B),B[0]&512&&j(k,1)):(k=re(g),k.c(),j(k,1),k.m(e,n)):k&&(P(),D(k,1,1,()=>{k=null}),Q()),(!w||B[0]&3072&&!W(o.src,s=g[10][g[11]][0].data))&&d(o,"src",s),(!w||B[0]&3072&&v!==(v=g[10][g[11]][1]||""))&&d(o,"alt",v),(!w||B[0]&3072&&a!==(a=g[10][g[11]][1]||null))&&d(o,"title",a),(!w||B[0]&3072)&&N(o,"with-caption",!!g[10][g[11]][1]),(!w||B[0]&3072)&&C(m,"height","calc(100% - "+(g[10][g[11]][1]?"80px":"60px")+")"),g[10][g[11]][1]?z?z.p(g,B):(z=fe(g),z.c(),z.m(t,u)):z&&(z.d(1),z=null),B[0]&7168){E=Z(g[10]);let b;for(b=0;b<E.length;b+=1){const V=oe(g,E,b);q[b]?q[b].p(V,B):(q[b]=ue(V),q[b].c(),q[b].m(_,null))}for(;b<q.length;b+=1)q[b].d(1);q.length=E.length}},i(g){w||(j(k),j(i.$$.fragment,g),w=!0)},o(g){D(k),D(i.$$.fragment,g),w=!1},d(g){g&&T(t),k&&k.d(),L(i),z&&z.d(),ve(q,g),l[30](null),A=!1,Ke(M)}}}function re(l){let t,e,n,i;return e=new Ye({props:{Icon:$e,label:l[16]("common.download")}}),{c(){t=I("a"),R(e.$$.fragment),d(t,"href",n=me(l[2][l[11]])),d(t,"target",window.__is_colab__?"_blank":null),d(t,"download","image"),d(t,"class","svelte-vg7mqq")},m(r,m){S(r,t,m),F(e,t,null),i=!0},p(r,m){const o={};m[0]&65536&&(o.label=r[16]("common.download")),e.$set(o),(!i||m[0]&2052&&n!==(n=me(r[2][r[11]])))&&d(t,"href",n)},i(r){i||(j(e.$$.fragment,r),i=!0)},o(r){D(e.$$.fragment,r),i=!1},d(r){r&&T(t),L(e)}}}function fe(l){let t,e=l[10][l[11]][1]+"",n;return{c(){t=I("caption"),n=ke(e),d(t,"class","caption svelte-vg7mqq")},m(i,r){S(i,t,r),G(t,n)},p(i,r){r[0]&3072&&e!==(e=i[10][i[11]][1]+"")&&qe(n,e)},d(i){i&&T(t)}}}function ue(l){let t,e,n,i,r,m,o=l[42],s,v;const a=()=>l[28](t,o),h=()=>l[28](null,o);function u(){return l[29](l[42])}return{c(){t=I("button"),e=I("img"),r=H(),W(e.src,n=l[39][0].data)||d(e,"src",n),d(e,"title",i=l[39][1]||null),d(e,"alt",""),d(e,"loading","lazy"),d(e,"class","svelte-vg7mqq"),d(t,"class","thumbnail-item thumbnail-small svelte-vg7mqq"),d(t,"aria-label",m="Thumbnail "+(l[42]+1)+" of "+l[10].length),N(t,"selected",l[11]===l[42])},m(_,w){S(_,t,w),G(t,e),G(t,r),a(),s||(v=O(t,"click",u),s=!0)},p(_,w){l=_,w[0]&1024&&!W(e.src,n=l[39][0].data)&&d(e,"src",n),w[0]&1024&&i!==(i=l[39][1]||null)&&d(e,"title",i),w[0]&1024&&m!==(m="Thumbnail "+(l[42]+1)+" of "+l[10].length)&&d(t,"aria-label",m),o!==l[42]&&(h(),o=l[42],a()),w[0]&2048&&N(t,"selected",l[11]===l[42])},d(_){_&&T(t),h(),s=!1,v()}}}function _e(l){let t,e,n;return e=new pe({props:{value:l[10],formatter:ll}}),e.$on("share",l[31]),e.$on("error",l[32]),{c(){t=I("div"),R(e.$$.fragment),d(t,"class","icon-button svelte-vg7mqq")},m(i,r){S(i,t,r),F(e,t,null),n=!0},p(i,r){const m={};r[0]&1024&&(m.value=i[10]),e.$set(m)},i(i){n||(j(e.$$.fragment,i),n=!0)},o(i){D(e.$$.fragment,i),n=!1},d(i){i&&T(t),L(e)}}}function ce(l){let t,e=l[40]+"",n;return{c(){t=I("div"),n=ke(e),d(t,"class","caption-label svelte-vg7mqq")},m(i,r){S(i,t,r),G(t,n)},p(i,r){r[0]&1024&&e!==(e=i[40]+"")&&qe(n,e)},d(i){i&&T(t)}}}function he(l){let t,e,n,i,r,m,o,s,v,a=l[40]&&ce(l);function h(){return l[33](l[42])}return{c(){t=I("button"),e=I("img"),r=H(),a&&a.c(),m=H(),d(e,"alt",n=l[40]||""),W(e.src,i=typeof l[39]=="string"?l[39]:l[39].data)||d(e,"src",i),d(e,"loading","lazy"),d(e,"class","svelte-vg7mqq"),d(t,"class","thumbnail-item thumbnail-lg svelte-vg7mqq"),d(t,"aria-label",o="Thumbnail "+(l[42]+1)+" of "+l[10].length),N(t,"selected",l[11]===l[42])},m(u,_){S(u,t,_),G(t,e),G(t,r),a&&a.m(t,null),G(t,m),s||(v=O(t,"click",h),s=!0)},p(u,_){l=u,_[0]&1024&&n!==(n=l[40]||"")&&d(e,"alt",n),_[0]&1024&&!W(e.src,i=typeof l[39]=="string"?l[39]:l[39].data)&&d(e,"src",i),l[40]?a?a.p(l,_):(a=ce(l),a.c(),a.m(t,m)):a&&(a.d(1),a=null),_[0]&1024&&o!==(o="Thumbnail "+(l[42]+1)+" of "+l[10].length)&&d(t,"aria-label",o),_[0]&2048&&N(t,"selected",l[11]===l[42])},d(u){u&&T(t),a&&a.d(),s=!1,v()}}}function il(l){let t,e;return t=new je({}),{c(){R(t.$$.fragment)},m(n,i){F(t,n,i),e=!0},i(n){e||(j(t.$$.fragment,n),e=!0)},o(n){D(t.$$.fragment,n),e=!1},d(n){L(t,n)}}}function ol(l){let t,e,n,i,r,m,o;we(l[25]);let s=l[0]&&ae(l);const v=[nl,tl],a=[];function h(u,_){return u[2]===null||u[10]===null||u[10].length===0?0:1}return e=h(l),n=a[e]=v[e](l),{c(){s&&s.c(),t=H(),n.c(),i=Re()},m(u,_){s&&s.m(u,_),S(u,t,_),a[e].m(u,_),S(u,i,_),r=!0,m||(o=O(ze,"resize",l[25]),m=!0)},p(u,_){u[0]?s?(s.p(u,_),_[0]&1&&j(s,1)):(s=ae(u),s.c(),j(s,1),s.m(t.parentNode,t)):s&&(P(),D(s,1,1,()=>{s=null}),Q());let w=e;e=h(u),e===w?a[e].p(u,_):(P(),D(a[w],1,1,()=>{a[w]=null}),Q(),n=a[e],n?n.p(u,_):(n=a[e]=v[e](u),n.c()),j(n,1),n.m(i.parentNode,i))},i(u){r||(j(s),j(n),r=!0)},o(u){D(s),D(n),r=!1},d(u){u&&(T(t),T(i)),s&&s.d(u),a[e].d(u),m=!1,o()}}}function al(l){return typeof l=="object"&&l!==null&&"data"in l}function me(l){return al(l)?l.data:typeof l=="string"?l:""}function sl(l,t,e){let n,i,r;Fe(l,Le,f=>e(16,r=f));let{show_label:m=!0}=t,{label:o}=t,{root:s=""}=t,{root_url:v=null}=t,{value:a=null}=t,{grid_cols:h=[2]}=t,{grid_rows:u=void 0}=t,{height:_="auto"}=t,{preview:w}=t,{allow_preview:A=!0}=t,{object_fit:M="cover"}=t,{show_share_button:k=!1}=t,{show_download_button:z=!1}=t;const E=Me();let q=!0,g=null,B=a,b=w&&a?.length?0:null,V=b;function U(f){const K=f.target,y=f.clientX,p=K.offsetWidth/2;y<p?e(11,b=n):e(11,b=i)}function J(f){switch(f.code){case"Escape":f.preventDefault(),e(11,b=null);break;case"ArrowLeft":f.preventDefault(),e(11,b=n);break;case"ArrowRight":f.preventDefault(),e(11,b=i);break}}let c=[],X;async function Be(f){if(typeof f!="number")return;await Xe(),c[f].focus();const{left:K,width:y}=X.getBoundingClientRect(),{left:$,width:p}=c[f].getBoundingClientRect(),ee=$-K+p/2-y/2+X.scrollLeft;X?.scrollTo({left:ee<0?0:ee,behavior:"smooth"})}let Y=0,x=0;function De(){e(15,x=ze.innerHeight)}const Ge=()=>e(11,b=null),Ie=f=>U(f);function Se(f,K){le[f?"unshift":"push"](()=>{c[K]=f,e(12,c)})}const Te=f=>e(11,b=f);function Ee(f){le[f?"unshift":"push"](()=>{X=f,e(13,X)})}function He(f){te.call(this,l,f)}function Ae(f){te.call(this,l,f)}const Ce=f=>e(11,b=f);function Ne(){Y=this.clientHeight,e(14,Y)}return l.$$set=f=>{"show_label"in f&&e(0,m=f.show_label),"label"in f&&e(1,o=f.label),"root"in f&&e(19,s=f.root),"root_url"in f&&e(20,v=f.root_url),"value"in f&&e(2,a=f.value),"grid_cols"in f&&e(3,h=f.grid_cols),"grid_rows"in f&&e(4,u=f.grid_rows),"height"in f&&e(5,_=f.height),"preview"in f&&e(21,w=f.preview),"allow_preview"in f&&e(6,A=f.allow_preview),"object_fit"in f&&e(7,M=f.object_fit),"show_share_button"in f&&e(8,k=f.show_share_button),"show_download_button"in f&&e(9,z=f.show_download_button)},l.$$.update=()=>{l.$$.dirty[0]&4194308&&e(22,q=a==null||a.length==0?!0:q),l.$$.dirty[0]&1572868&&e(10,g=a===null?null:a.map(f=>Array.isArray(f)?[ne(f[0],s,v),f[1]]:[ne(f,s,v),null])),l.$$.dirty[0]&14682116&&B!==a&&(q?(e(11,b=w&&a?.length?0:null),e(22,q=!1)):e(11,b=b!==null&&a!==null&&b<a.length?b:null),e(23,B=a)),l.$$.dirty[0]&3072&&(n=((b??0)+(g?.length??0)-1)%(g?.length??0)),l.$$.dirty[0]&3072&&(i=((b??0)+1)%(g?.length??0)),l.$$.dirty[0]&16780288&&b!==V&&(e(24,V=b),b!==null&&E("select",{index:b,value:g?.[b][1]})),l.$$.dirty[0]&2112&&A&&Be(b)},[m,o,a,h,u,_,A,M,k,z,g,b,c,X,Y,x,r,U,J,s,v,w,q,B,V,De,Ge,Ie,Se,Te,Ee,He,Ae,Ce,Ne]}class rl extends ge{constructor(t){super(),be(this,t,sl,ol,de,{show_label:0,label:1,root:19,root_url:20,value:2,grid_cols:3,grid_rows:4,height:5,preview:21,allow_preview:6,object_fit:7,show_share_button:8,show_download_button:9},null,[-1,-1])}}function fl(l){let t,e,n,i;const r=[l[0]];let m={};for(let o=0;o<r.length;o+=1)m=Oe(m,r[o]);return t=new Pe({props:m}),n=new rl({props:{label:l[2],value:l[8],show_label:l[1],root:l[3],root_url:l[4],grid_cols:l[12],grid_rows:l[13],height:l[14],preview:l[15],object_fit:l[17],allow_preview:l[16],show_share_button:l[18],show_download_button:l[19]}}),n.$on("select",l[21]),n.$on("share",l[22]),n.$on("error",l[23]),{c(){R(t.$$.fragment),e=H(),R(n.$$.fragment)},m(o,s){F(t,o,s),S(o,e,s),F(n,o,s),i=!0},p(o,s){const v=s&1?Qe(r,[Ue(o[0])]):{};t.$set(v);const a={};s&4&&(a.label=o[2]),s&256&&(a.value=o[8]),s&2&&(a.show_label=o[1]),s&8&&(a.root=o[3]),s&16&&(a.root_url=o[4]),s&4096&&(a.grid_cols=o[12]),s&8192&&(a.grid_rows=o[13]),s&16384&&(a.height=o[14]),s&32768&&(a.preview=o[15]),s&131072&&(a.object_fit=o[17]),s&65536&&(a.allow_preview=o[16]),s&262144&&(a.show_share_button=o[18]),s&524288&&(a.show_download_button=o[19]),n.$set(a)},i(o){i||(j(t.$$.fragment,o),j(n.$$.fragment,o),i=!0)},o(o){D(t.$$.fragment,o),D(n.$$.fragment,o),i=!1},d(o){o&&T(e),L(t,o),L(n,o)}}}function ul(l){let t,e;return t=new Ze({props:{visible:l[7],variant:"solid",padding:!1,elem_id:l[5],elem_classes:l[6],container:l[9],scale:l[10],min_width:l[11],allow_overflow:!1,height:typeof l[14]=="number"?l[14]:void 0,$$slots:{default:[fl]},$$scope:{ctx:l}}}),{c(){R(t.$$.fragment)},m(n,i){F(t,n,i),e=!0},p(n,[i]){const r={};i&128&&(r.visible=n[7]),i&32&&(r.elem_id=n[5]),i&64&&(r.elem_classes=n[6]),i&512&&(r.container=n[9]),i&1024&&(r.scale=n[10]),i&2048&&(r.min_width=n[11]),i&16384&&(r.height=typeof n[14]=="number"?n[14]:void 0),i&18870559&&(r.$$scope={dirty:i,ctx:n}),t.$set(r)},i(n){e||(j(t.$$.fragment,n),e=!0)},o(n){D(t.$$.fragment,n),e=!1},d(n){L(t,n)}}}function _l(l,t,e){let{loading_status:n}=t,{show_label:i}=t,{label:r}=t,{root:m}=t,{root_url:o}=t,{elem_id:s=""}=t,{elem_classes:v=[]}=t,{visible:a=!0}=t,{value:h=null}=t,{container:u=!0}=t,{scale:_=null}=t,{min_width:w=void 0}=t,{grid_cols:A=[2]}=t,{grid_rows:M=void 0}=t,{height:k="auto"}=t,{preview:z}=t,{allow_preview:E=!0}=t,{object_fit:q="cover"}=t,{show_share_button:g=!1}=t,{show_download_button:B=!1}=t,{gradio:b}=t;const V=c=>b.dispatch("select",c.detail),U=c=>b.dispatch("share",c.detail),J=c=>b.dispatch("error",c.detail);return l.$$set=c=>{"loading_status"in c&&e(0,n=c.loading_status),"show_label"in c&&e(1,i=c.show_label),"label"in c&&e(2,r=c.label),"root"in c&&e(3,m=c.root),"root_url"in c&&e(4,o=c.root_url),"elem_id"in c&&e(5,s=c.elem_id),"elem_classes"in c&&e(6,v=c.elem_classes),"visible"in c&&e(7,a=c.visible),"value"in c&&e(8,h=c.value),"container"in c&&e(9,u=c.container),"scale"in c&&e(10,_=c.scale),"min_width"in c&&e(11,w=c.min_width),"grid_cols"in c&&e(12,A=c.grid_cols),"grid_rows"in c&&e(13,M=c.grid_rows),"height"in c&&e(14,k=c.height),"preview"in c&&e(15,z=c.preview),"allow_preview"in c&&e(16,E=c.allow_preview),"object_fit"in c&&e(17,q=c.object_fit),"show_share_button"in c&&e(18,g=c.show_share_button),"show_download_button"in c&&e(19,B=c.show_download_button),"gradio"in c&&e(20,b=c.gradio)},[n,i,r,m,o,s,v,a,h,u,_,w,A,M,k,z,E,q,g,B,b,V,U,J]}class cl extends ge{constructor(t){super(),be(this,t,_l,ul,de,{loading_status:0,show_label:1,label:2,root:3,root_url:4,elem_id:5,elem_classes:6,visible:7,value:8,container:9,scale:10,min_width:11,grid_cols:12,grid_rows:13,height:14,preview:15,allow_preview:16,object_fit:17,show_share_button:18,show_download_button:19,gradio:20})}}const Dl=cl;export{Dl as default};
//# sourceMappingURL=index-1385562d.js.map
